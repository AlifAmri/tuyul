# cert-manager ClusterIssuer for Let's Encrypt
# Apply this before deploying the Helm chart if you want automatic SSL certificates
#
# Usage:
#   kubectl apply -f cert-manager-issuer.yaml
#
# Note: Replace your-email@example.com with your actual email address

apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    server: https://acme-v02.api.letsencrypt.org/directory
    email: alifamri@evn.co.id  # Change this to your email
    privateKeySecretRef:
      name: letsencrypt-prod
    solvers:
    - http01:
        ingress:
          class: kong

---
# Staging issuer (for testing - use this first to test)
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-staging
spec:
  acme:
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    email: alifamri@evn.co.id # Change this to your email
    privateKeySecretRef:
      name: letsencrypt-staging
    solvers:
    - http01:
        ingress:
          class: kong

